/*
irtDataSimulation creates raw scores of a binary eight-item test.
Copyright (C) 2019  Bo Klauth

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
********************************;
  * SIMULATE 4PL IRT DATA;
* Step 1: Run the data step below;

data b0 ;
input id item1-item8 freq;
datalines;
1 0 0 0 0 0 0 0 1 10
2 0 0 0 0 0 0 1 0 3
3 0 0 0 0 0 0 1 1 1
4 0 0 0 0 0 1 0 0 6
5 0 0 0 0 0 1 0 1 3
6 0 0 0 0 0 1 1 1 1
7 0 0 0 0 1 0 0 1 2
8 0 0 0 0 1 0 1 1 1
9 0 0 0 1 0 0 0 0 13
10 0 0 0 1 0 0 0 1 7
11 0 0 0 1 0 0 1 0 3
12 0 0 0 1 0 0 1 1 1
13 0 0 0 1 0 1 0 0 5
14 0 0 0 1 0 1 0 1 9
15 0 0 0 1 0 1 1 0 1
16 0 0 0 1 0 1 1 1 3
17 0 0 0 1 1 0 0 0 1
18 0 0 0 1 1 0 1 0 1
19 0 0 0 1 1 1 0 0 1
20 0 0 0 1 1 1 1 1 3
21 0 0 1 0 0 0 0 0 2
22 0 0 1 0 0 0 0 1 2
23 0 0 1 0 0 0 1 1 3
24 0 0 1 0 0 1 0 1 3
25 0 0 1 0 0 1 1 0 1
26 0 0 1 0 0 1 1 1 1
27 0 0 1 0 1 0 0 0 1
28 0 0 1 1 0 0 0 1 10
29 0 0 1 1 0 0 1 0 3
30 0 0 1 1 0 0 1 1 6
31 0 0 1 1 0 1 0 0 2
32 0 0 1 1 0 1 0 1 1
33 0 0 1 1 0 1 1 0 3
34 0 0 1 1 0 1 1 1 6
35 0 0 1 1 1 1 0 1 1
36 0 0 1 1 1 1 1 1 6
37 0 1 0 0 0 0 0 0 5
38 0 1 0 0 0 0 0 1 5
39 0 1 0 0 0 0 1 0 1
40 0 1 0 0 0 0 1 1 2
41 0 1 0 0 0 1 0 0 5
42 0 1 0 0 0 1 0 1 1
43 0 1 0 0 0 1 1 0 3
44 0 1 0 0 0 1 1 1 2
45 0 1 0 0 1 0 0 0 1
46 0 1 0 0 1 0 0 1 1
47 0 1 0 0 1 0 1 0 1
48 0 1 0 0 1 1 1 0 1
49 0 1 0 0 1 1 1 1 3
50 0 1 0 1 0 0 0 0 4
51 0 1 0 1 0 0 0 1 11
52 0 1 0 1 0 0 1 0 1
53 0 1 0 1 0 0 1 1 4
54 0 1 0 1 0 1 0 0 2
55 0 1 0 1 0 1 0 1 10
56 0 1 0 1 0 1 1 0 1
57 0 1 0 1 0 1 1 1 11
58 0 1 0 1 1 0 0 0 1
59 0 1 0 1 1 0 0 1 2
60 0 1 0 1 1 0 1 0 1
61 0 1 0 1 1 0 1 1 3
62 0 1 0 1 1 1 0 0 1
63 0 1 0 1 1 1 0 1 3
64 0 1 0 1 1 1 1 0 4
65 0 1 0 1 1 1 1 1 8
66 0 1 1 0 0 0 0 0 1
67 0 1 1 0 0 0 0 1 1
68 0 1 1 0 0 0 1 0 1
69 0 1 1 0 0 1 0 0 1
70 0 1 1 0 0 1 1 1 4
71 0 1 1 0 1 0 0 0 1
72 0 1 1 0 1 0 1 1 1
73 0 1 1 0 1 1 0 0 1
74 0 1 1 0 1 1 0 1 2
75 0 1 1 0 1 1 1 1 5
76 0 1 1 1 0 0 0 0 1
77 0 1 1 1 0 0 0 1 8
78 0 1 1 1 0 0 1 0 3
79 0 1 1 1 0 0 1 1 10
80 0 1 1 1 0 1 0 1 11
81 0 1 1 1 0 1 1 0 3
82 0 1 1 1 0 1 1 1 29
83 0 1 1 1 1 0 0 1 2
84 0 1 1 1 1 0 1 0 1
85 0 1 1 1 1 0 1 1 3
86 0 1 1 1 1 1 0 0 1
87 0 1 1 1 1 1 0 1 4
88 0 1 1 1 1 1 1 0 1
89 0 1 1 1 1 1 1 1 36
90 1 0 0 0 0 0 0 0 1
91 1 0 0 0 0 1 1 1 1
92 1 0 0 0 1 0 0 1 1
93 1 0 0 0 1 0 1 0 2
94 1 0 0 0 1 1 0 0 1
95 1 0 0 0 1 1 0 1 1
96 1 0 0 0 1 1 1 0 1
97 1 0 0 1 0 0 0 0 1
98 1 0 0 1 0 0 0 1 1
99 1 0 0 1 0 0 1 0 2
100 1 0 0 1 0 0 1 1 1
101 1 0 0 1 0 1 0 0 1
102 1 0 0 1 0 1 1 0 2
103 1 0 0 1 0 1 1 1 1
104 1 0 0 1 1 0 0 0 1
105 1 0 0 1 1 0 0 1 2
106 1 0 0 1 1 1 1 0 1
107 1 0 0 1 1 1 1 1 2
108 1 0 1 0 0 0 1 0 2
109 1 0 1 0 0 1 0 0 1
110 1 0 1 0 1 1 0 0 1
111 1 0 1 0 1 1 0 1 1
112 1 0 1 0 1 1 1 1 3
113 1 0 1 1 0 0 0 0 2
114 1 0 1 1 0 0 1 0 1
115 1 0 1 1 0 0 1 1 1
116 1 0 1 1 0 1 0 1 2
117 1 0 1 1 0 1 1 0 1
118 1 0 1 1 0 1 1 1 6
119 1 0 1 1 1 0 0 1 1
120 1 0 1 1 1 0 1 0 1
121 1 0 1 1 1 1 0 0 1
122 1 0 1 1 1 1 0 1 3
123 1 0 1 1 1 1 1 0 2
124 1 0 1 1 1 1 1 1 4
125 1 1 0 0 0 0 1 1 1
126 1 1 0 0 0 1 0 1 3
127 1 1 0 0 0 1 1 0 3
128 1 1 0 0 1 0 0 0 2
129 1 1 0 0 1 0 0 1 1
130 1 1 0 0 1 1 0 0 1
131 1 1 0 0 1 1 0 1 4
132 1 1 0 0 1 1 1 0 2
133 1 1 0 0 1 1 1 1 3
134 1 1 0 1 0 0 0 1 3
135 1 1 0 1 0 0 1 1 5
136 1 1 0 1 0 1 0 0 1
137 1 1 0 1 0 1 0 1 10
138 1 1 0 1 0 1 1 0 4
139 1 1 0 1 0 1 1 1 19
140 1 1 0 1 1 0 0 1 5
141 1 1 0 1 1 0 1 0 2
142 1 1 0 1 1 0 1 1 4
143 1 1 0 1 1 1 0 0 7
144 1 1 0 1 1 1 0 1 11
145 1 1 0 1 1 1 1 0 8
146 1 1 0 1 1 1 1 1 41
147 1 1 1 0 0 0 0 1 3
148 1 1 1 0 0 0 1 1 2
149 1 1 1 0 0 1 1 0 3
150 1 1 1 0 0 1 1 1 5
151 1 1 1 0 1 0 0 0 2
152 1 1 1 0 1 0 1 1 1
153 1 1 1 0 1 1 0 1 4
154 1 1 1 0 1 1 1 0 3
155 1 1 1 0 1 1 1 1 8
156 1 1 1 1 0 0 0 0 1
157 1 1 1 1 0 0 0 1 1
158 1 1 1 1 0 0 1 0 2
159 1 1 1 1 0 0 1 1 6
160 1 1 1 1 0 1 0 1 12
161 1 1 1 1 0 1 1 0 9
162 1 1 1 1 0 1 1 1 39
163 1 1 1 1 1 0 0 0 3
164 1 1 1 1 1 0 0 1 3
165 1 1 1 1 1 0 1 0 1
166 1 1 1 1 1 0 1 1 9
167 1 1 1 1 1 1 0 0 1
168 1 1 1 1 1 1 0 1 35
169 1 1 1 1 1 1 1 0 14
170 1 1 1 1 1 1 1 1 306
run;

* Step 2: Run the macro code below ;

%Macro sim();
proc sql;
select max(freq)as score_pattern_maxfreq into: nmax
from b0;
run;

%do i = 0 %to &nmax;
%let j = %eval(&i+1);
data b&j;
set b&i;
freq=freq-1;
if freq=<0 then delete;
run;
proc append base=b0 data=b&j;
run;
%end;
* create a new dataset from oldone;
data sampleData2(drop=freq);
set b0;
id=_N_;
run;

%let max =&nmax+1;
%do z = 0 %to &max;
proc datasets lib=work nolist;  
 delete  b&z;
 quit; 
run;
%end;
%mend sim;
%sim();














